<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js" defer></script>
    <script src="//unpkg.com/alpinejs" defer></script>
    
  </head>
  <body>
    <div x-data="{
      pricePlan:'Phone Bill',
      myPrice_plan:[],
      plan_name:'',
      action:'',
      total:0,
      init(){
        return axios
        .get('https://price-plan-3cje.onrender.com/api/phonebill')
        .then((result)=>{
          console.log(result.data)
          this.myPrice_plan=result.data.price_Plan;
        }) 
    },

    bill(){
      return axios
      .get('https://price-plan-3cje.onrender.com/api/phonebill?plan_name=${this.plan_name}$action=${this.action}')
      .then((result)=>{
        console.log(result.data.total)
        this.total=result.data.total;
      })
    }
    }"
    >
    <div> 
      <h1 x-text="pricePlan"></h1>
    </div>
<br>
      <table>
        <tr>
          <th>ID</th>
          <th>Plan_Name</th>
          <th>sms_price</th>
          <th>call_price</th>
        </tr>
        
         <template x-for="price in myPrice_plan">
          <tr>
          <td x-text="price.id"></td>
          <td x-text="price.plan_name"></td>
          <td x-text="price.sms_price"></td>
          <td x-text="price.call_price"></td>
        </tr>
        </template> 
        
      </table>

      <hr>
      <div>
        <div>
          <p>Serch price plan by name</p>
          <input x-model="plan_name" placeholder="plan_name">
          <input x-model="action" placeholder="sms,call,sms,call">
          <button x-on:click="bill">Search</button>
          <p x-text="total"></p>
        </div>
      </div>
    </div>

  </body>
</html>
